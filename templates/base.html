{% load static %}
{% load channel_check %}
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://unpkg.com/tailwindcss@^1.0/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/custom.css' %}" >
    <title>{% block head_title %}{% endblock %}</title>
    {% block extra_head %}
    {% endblock %}
</head>

<body class="bg-gray-200">
    {% block body %}
    <div class="flex justify-between w-full items-center py-3 px-6 bg-white top-0 fixed">
        <div class="flex items-center">
            <svg xmlns="http://www.w3.org/2000/svg" class="w-8" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
            </svg>
            <a href="{%url 'home'%}">
                <div class="ml-8 flex items-center">
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-8" viewBox="0 0 20 20" fill="#F44336">
                        <path fill-rule="evenodd"
                            d="M10 18a8 8 0 100-16 8 8 0 000 16zM9.555 7.168A1 1 0 008 8v4a1 1 0 001.555.832l3-2a1 1 0 000-1.664l-3-2z"
                            clip-rule="evenodd" />
                    </svg>
                    <span class="text-4xl font-bold font-serif capitalize">VideoClub</span>
                </div>
            </a>
        </div>
<!--Search bar-->
            <div class="flex">
                <form action="/search/" method="GET">
                    <input type="text" name="q" class="border border-gray-400  px-3 py-3 outline-none focus:shadow-outline" size="60" placeholder="Search...">
                    </form>
                <div class="flex items-center border border-l-0 border-gray-400 px-2 hover:bg-gray-200">
                    <svg xmlns="http://www.w3.org/2000/svg" class="w-5" viewBox="0 0 20 20" fill="currentColor">
                        <path fill-rule="evenodd"
                            d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z"
                            clip-rule="evenodd" />
                    </svg>
                </div>
            </div>
<!-- End Search bar-->
<!--File upload-->
        <div class="flex items-center">
            <a href="{% url 'file-upload' %}">
                <svg xmlns="http://www.w3.org/2000/svg" class=" w-10 px-2 cursor-pointer" viewBox="0 0 20 20"
                    fill="currentColor">
                    <path
                        d="M2 6a2 2 0 012-2h6a2 2 0 012 2v8a2 2 0 01-2 2H4a2 2 0 01-2-2V6zM14.553 7.106A1 1 0 0014 8v4a1 1 0 00.553.894l2 1A1 1 0 0018 13V7a1 1 0 00-1.447-.894l-2 1z" />
                </svg>
            </a>
<!--End File upload-->
<!--Channel logic -->
            <div class="relative profile">
                {% if user.is_authenticated %}
                <div class="icon_wrap p-2">
                    <svg xmlns="http://www.w3.org/2000/svg" class=" w-16 px-2 cursor-pointer" fill="none"
                        viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M5.121 17.804A13.937 13.937 0 0112 16c2.5 0 4.847.655 6.879 1.804M15 10a3 3 0 11-6 0 3 3 0 016 0zm6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                </div>
                <div class="profile_d z-20 shadow-xl absolute border rounded border-gray-200  bg-white">
                    <ul>
                        {% if request.user|has_channel %}
                        <li class="border-b border-gray-200 hover:bg-gray-200">
                            <a href="{% url 'mychannel' user.username %}"
                                class="flex items-center py-3 px-4 text-xl text-gray-600 font-semibold capitalize">
                                <span class="p_icon">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="mx-2" width="24" height="24"
                                        viewBox="0 0 20 20" fill="currentColor">
                                        <path
                                            d="M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3zM6 8a2 2 0 11-4 0 2 2 0 014 0zM16 18v-3a5.972 5.972 0 00-.75-2.906A3.005 3.005 0 0119 15v3h-3zM4.75 12.094A5.973 5.973 0 004 15v3H1v-3a3 3 0 013.75-2.906z" />
                                    </svg>
                                </span>
                                Your channel
                            </a>
                        </li>
                        {% else %}
                        <li class="border-b border-gray-200 hover:bg-gray-200">
                            <a href="{% url 'create-channel' %}"
                                class="flex items-center py-3 px-4 text-xl text-gray-600 font-semibold capitalize">
                                <span class="p_icon">
                                    <svg xmlns="http://www.w3.org/2000/svg" class="mx-2" width="24" height="24"
                                        viewBox="0 0 20 20" fill="currentColor">
                                        <path
                                            d="M13 6a3 3 0 11-6 0 3 3 0 016 0zM18 8a2 2 0 11-4 0 2 2 0 014 0zM14 15a4 4 0 00-8 0v3h8v-3zM6 8a2 2 0 11-4 0 2 2 0 014 0zM16 18v-3a5.972 5.972 0 00-.75-2.906A3.005 3.005 0 0119 15v3h-3zM4.75 12.094A5.973 5.973 0 004 15v3H1v-3a3 3 0 013.75-2.906z" />
                                    </svg>
                                </span>
                                create channel
                            </a>
                        </li>
                        {% endif %}
                        <!--End Channel logic -->
                        <li class="border-b border-gray-200 hover:bg-gray-200">
                            <a href="{% url 'account_logout' %}"
                                class="flex items-center py-3 px-4 text-xl text-gray-600 font-semibold capitalize">
                                <span class="p_icon">
                                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" class="mx-2"
                                        width="24" height="24" stroke="currentColor">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                            d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1" />
                                    </svg>
                                </span>
                                signout
                            </a>
                        </li>


                    </ul>
                </div>
                {% else %}
                <a href="{% url 'account_login' %}" class="py-2 px-4 border border-blue-500 text-lg text-blue-500">Sign
                    In</a>
                {% endif %}
            </div>
        </div>
    </div>


    {% if messages %}
    <div>
        <strong>Messages:</strong>
        <ul>
            {% for message in messages %}
            <li>{{message}}</li>
            {% endfor %}
        </ul>
    </div>
    {% endif %}

<!--Navbar logic -->
    <main>
        <div class="flex mt-20 ">
            <div class="bg-white h-screen text-sm tracking-tighter cursor-pointer left-0 fixed">
                <div class="hover:bg-gray-200 flex flex-col items-center bg-blue-400 py-4 w-full">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" width="24" height="24"
                        stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
                    </svg>
                    <span class="mt-2">Home</span>
                </div>

                <div class="hover:bg-gray-200 flex flex-col items-center py-4 w-full">
                    <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" width="24" height="24"
                        stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6" />
                    </svg>
                    <!--Queryset on num_likes or view_count-->
                    <span class="mt-2">Trending</span>
                </div>

                <div class="hover:bg-gray-200 flex flex-col items-center py-4 w-full">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" width="24" height="24"
                        fill="currentColor">
                        <path fill-rule="evenodd"
                            d="M4 5a2 2 0 00-2 2v8a2 2 0 002 2h12a2 2 0 002-2V7a2 2 0 00-2-2h-1.586a1 1 0 01-.707-.293l-1.121-1.121A2 2 0 0011.172 3H8.828a2 2 0 00-1.414.586L6.293 4.707A1 1 0 015.586 5H4zm6 9a3 3 0 100-6 3 3 0 000 6z"
                            clip-rule="evenodd" />
                    </svg>
                    <!--same many to many relationship-->
                    <span class="mt-2">Subcriptions</span>
                </div>
                    <!--later config on load num_likes-->
                    
                </div>
            </div>

            <div class="overflow-hidden p-4 " style="margin-left: 70px; width: 96%;">
                {% block content %}


                {% endblock %}
            </div>
        </div>
    </main>
<!--End Navbar  -->
    {% endblock %}

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"
        integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>

    {% block extra_body %}

    {% endblock %}

    <script>
        $(document).ready(function () {
            $(".profile .icon_wrap").click(function () {
                $(this).parent().toggleClass("active");
                $(".notification").removeClass("active");
            })

            $(".notification .icon_wrap").click(function () {
                $(this).parent().toggleClass("active");
                $(".profile").removeClass("active");
            })
        })
    </script>
</body>

</html>