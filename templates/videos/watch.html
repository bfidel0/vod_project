{% extends "base.html" %}
{% load static %}


{% block head_title %}video watch{% endblock %}

{% block content %}
<div class="grid grid-cols-3">
    <div class="col-span-2 p-8">
        <div class="video"> 
            <!--On mobile check-->
            <video id="video" width="100%" height="auto" onclick="playPause();" controls autoplay> 
                <source src="{{ my_video.video.url }}" type="video/mp4">
            </video>
        </div>
        <h2 class="font-semibold py-4 font-sans capitalize text-3xl">{{ my_video.videodetail.title }}</h2>
        <div class="flex justify-between pb-3 border-b border-gray-400">
            <div class="font-medium text-gray-700 text-xl">
                <span class="leading-8">{{ view_count }} views</span>
                <span>{{ my_video.uploaded|timesince }} ago</span>
            </div>
            <div class="flex space-x-8 font-medium text-gray-700 text-xl">
                <form action="{% url 'like-video' my_video.id %}" method="POST" class="like-form">
                    {% csrf_token %}
                    <button type="submit" class="like-btn" name="video_id" value="{{ my_video.id }}">
                        {% if user not in my_video.likes.all %}
                        <svg xmlns="http://www.w3.org/2000/svg" class=" mr-2 like-icon inline-block" viewBox="0 0 20 20" width="24" height="24" fill="currentColor">
                            <path d="M2 10.5a1.5 1.5 0 113 0v6a1.5 1.5 0 01-3 0v-6zM6 10.333v5.43a2 2 0 001.106 1.79l.05.025A4 4 0 008.943 18h5.416a2 2 0 001.962-1.608l1.2-6A2 2 0 0015.56 8H12V4a2 2 0 00-2-2 1 1 0 00-1 1v.667a4 4 0 01-.8 2.4L6.8 7.933a4 4 0 00-.8 2.4z" />
                        </svg>
                        {% else %}
                        <svg xmlns="http://www.w3.org/2000/svg" class=" mr-2 like-icon text-blue-700 inline-block" viewBox="0 0 20 20"
                            width="24" height="24" fill="currentColor">
                            <path
                                d="M2 10.5a1.5 1.5 0 113 0v6a1.5 1.5 0 01-3 0v-6zM6 10.333v5.43a2 2 0 001.106 1.79l.05.025A4 4 0 008.943 18h5.416a2 2 0 001.962-1.608l1.2-6A2 2 0 0015.56 8H12V4a2 2 0 00-2-2 1 1 0 00-1 1v.667a4 4 0 01-.8 2.4L6.8 7.933a4 4 0 00-.8 2.4z" />
                        </svg>
                        {% endif %}
                    </button>
                    <span class="like-count" id="like-count">{{ my_video.num_likes }}</span>
                </form>
                <form action="{% url 'dislike-video' my_video.id %}" method="POST" class="dislike-form">
                    {% csrf_token %}
                    <button type="submit" class="dislike-btn" name="video_id" value="{{ my_video.id }}">
                        {% if user not in my_video.dislikes.all %}
                        <!--check dislike functionality for template fix-->
                        <svg xmlns="http://www.w3.org/2000/svg" class=" mr-2 dislike-icon inline-block" viewBox="0 0 20 20" width="24"
                            height="24" fill="currentColor">
                            <path
                                d="M18 9.5a1.5 1.5 0 11-3 0v-6a1.5 1.5 0 013 0v6zM14 9.667v-5.43a2 2 0 00-1.105-1.79l-.05-.025A4 4 0 0011.055 2H5.64a2 2 0 00-1.962 1.608l-1.2 6A2 2 0 004.44 12H8v4a2 2 0 002 2 1 1 0 001-1v-.667a4 4 0 01.8-2.4l1.4-1.866a4 4 0 00.8-2.4z" />
                        </svg>
                        {% else %}
                        <svg xmlns="http://www.w3.org/2000/svg" class=" mr-2 dislike-icon text-blue-700 inline-block"
                            viewBox="0 0 20 20" width="24" height="24" fill="currentColor">
                            <path
                                d="M18 9.5a1.5 1.5 0 11-3 0v-6a1.5 1.5 0 013 0v6zM14 9.667v-5.43a2 2 0 00-1.105-1.79l-.05-.025A4 4 0 0011.055 2H5.64a2 2 0 00-1.962 1.608l-1.2 6A2 2 0 004.44 12H8v4a2 2 0 002 2 1 1 0 001-1v-.667a4 4 0 01.8-2.4l1.4-1.866a4 4 0 00.8-2.4z" />
                        </svg>
                        {% endif %}
                    </button>
                    <span id="dislike-count">{{ my_video.num_dislikes }}</span>
                </form>
                <div>
                </div>
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" width="24" height="24"
                    stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                        d="M5 12h.01M12 12h.01M19 12h.01M6 12a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0zm7 0a1 1 0 11-2 0 1 1 0 012 0z" />
                </svg>
            </div>
        </div>

        <div class="flex justify-between mt-6">
            <div class="flex space-x-2">
                <img src="{{my_video.channel.channel_pic.url}}" class="rounded-full h-14 w-12" alt="profile pic">
                <div> 
                    <h2>{{my_video.channel.name}}</h2>
                    <h3>32.7k subcribers</h3>
                </div>
            </div>
            <div> <!--many to many relationships-->
                <button type="button"
                    class="px-8 py-3 bg-red-700 text-white font-medium text-l border border-gray-400">Subcribe</button>
            </div>
        </div>
<!--Description start-->
        <div class="py-8 px-12 bg-gray-300 mt-2">
                <p class="font-medium">
                    {{ my_video.videodetail.description }}
                </p>
        </div>
<!--Description End-->

        <!-- Comments start here -->
        <div class="col md-8">
        </div>

    <!-- Comments end here -->
    <div class="container h-screen min-h-full  bg-white">
        <h2 class="font-semibold py-2 capitalize text-xl">Up next</h2>
        <div class=" flex  space-x-2 py-2  border-t  px-2">
            <div class="w-1/2 h-40 py-2">
                <!--video thumbnail load-->
                <img src="imgs/django.jpg" class="" alt="thumbnail">
            </div>
            <div>
                <h1 class="font-semibold">Lorem ipsum dolor sit, amet <br> consectetur consectetur.</h1>
                <div class="mt-2 text-sm text-gray-700">
                    <!--channel name load-->
                    <h2>channel name</h2>
                    <!--View count and upload since tags-->
                    <h3>1.9k views 3 day ago</h3>
                </div>
            </div>
        </div>

        <div class=" flex  space-x-2 py-2  border-t  px-2">
            <div class="w-1/2 h-40 py-2">
                <!--video thumbnail load-->
                <img src="imgs/django.jpg" class="" alt="thumbnail">
            </div>
            <div>
                <h1 class="font-semibold">Lorem ipsum dolor sit, amet <br> consectetur consectetur.</h1>
                <div class="mt-2 text-sm text-gray-700">
                    <!--channel name load-->
                    <h2>channel name</h2>
                    <!--View count and upload since tags-->
                    <h3>1.9k views 3 day ago</h3>
                </div>
            </div>
        </div>

        <div class=" flex  space-x-2 py-2  border-t  px-2">
            <div class="w-1/2 h-40 py-2">
                <!--video thumbnail load-->
                <img src="imgs/django.jpg" class="" alt="thumbnail">
            </div>
            <div>
                <h1 class="font-semibold">Lorem ipsum dolor sit, amet <br> consectetur consectetur.</h1>
                <div class="mt-2 text-sm text-gray-700">
                    <!--channel name load-->
                    <h2>channel name</h2>
                    <!--View count and upload since tags-->
                    <h3>1.9k views 3 day ago</h3>
                </div>
            </div>
        </div>

        <div class=" flex  space-x-2 py-2  border-t  px-2">
            <div class="w-1/2 h-40 py-2">
                <!--video thumbnail load-->
                <img src="imgs/django.jpg" class="" alt="thumbnail">
            </div>
            <div>
                <h1 class="font-semibold">Lorem ipsum dolor sit, amet <br> consectetur consectetur.</h1>
                <div class="mt-2 text-sm text-gray-700">
                    <!--channel name load-->
                    <h2>channel name</h2>
                    <!--View count and upload since tags-->
                    <h3>1.9k views 3 day ago</h3>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_body %}
<script src="{% static 'js/like_dislike.js' %}"></script>
{% endblock %}